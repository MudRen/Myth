//Cracked by Roath
inherit F_CLEAN_UP;

#include <ansi.h>
#include <quest.h>

// the quest format is the following mapping:
// daoxing :     type     name     id            object         amount
//--------------------------------------------------------------------
//  1000   : ({ "find",  "ÃØóÅ",   "mi ji" ,     "",             "1" }), 
//  5000   : ({ "give",  "ÔÖÃñ",   "zai min" ,   "°×Òø(silver)", "5" }), 
// 12000   : ({ "kill",  "°×¹Ç¾«", "baigu jing", "",             "3" });
 
//ÕÒÒ»±¾ÃØóÅ£¬¾È¼ÃÔÖÃñÎåÁ½Òø×Ó£¬Èý´ò°×¹Ç¾«£®£®£®£®£®£®

mapping quests_weapon = ([
      50 : ({ "find", "²Ëµ¶",         "cai dao",            "", "1" }),
     110 : ({ "find", "Ìú´¸",         "hammer",             "", "1" }),
     120 : ({ "find", "Ä¾µ¶",         "mu dao",             "", "1" }),
     130 : ({ "find", "Ä¾¹÷",         "mu gun",             "", "1" }),
     140 : ({ "find", "Ä¾½£",         "mu jian",            "", "1" }),
     150 : ({ "find", "Ä¾Ç¹",         "mu qiang",           "", "1" }),
     160 : ({ "find", "Ä¾ÕÈ",         "mu zhang",           "", "1" }),
     170 : ({ "find", "¹ðÊ÷Ö¦",       "guishuzhi",          "", "1" }),

     210 : ({ "find", "ïÙÌú¹÷",       "bintiegun",          "", "1" }),
     220 : ({ "find", "ÆëÃ¼¹÷",       "qimeigun",           "", "1" }),
     230 : ({ "find", "ÖñÉ¨Öã",       "broom",              "", "1" }),
     240 : ({ "find", "Ä¾°ô",         "mu bang",            "", "1" }),
     250 : ({ "find", "Ä¾²æ",         "fork",               "", "1" }),

     300 : ({ "find", "·ç»ØÑ©Îè½£",   "snowsword",          "", "1" }),
     350 : ({ "find", "¾Å¹ÉÍÐÌì²æ",   "tuotian fork",       "", "1" }),

     500 : ({ "find", "Ìú¸«",         "lumber axe",         "", "1" }),

     700 : ({ "find", "´óÂí°ô",       "mabang",             "", "1" }),
     800 : ({ "find", "¿³µ¶",         "blade",              "", "1" }),
     900 : ({ "find", "µ·Ò©èÆ",       "yao chu",            "", "1" }),
    2100 : ({ "find", "µ¥µ¶",         "blade",              "", "1" }),
    2200 : ({ "find", "³¤Ç¹",         "chang qiang",        "", "1" }),
    2300 : ({ "find", "³¤½£",         "sword",              "", "1" }),

    3100 : ({ "find", "Öñ±Þ",         "zhu bian",           "", "1" }),
    3200 : ({ "find", "Öñ°Ò",         "zhu pa",             "", "1" }),
    3300 : ({ "find", "ÊìÍ­ïµ",       "copper mace",        "", "1" }),
    5000 : ({ "find", "¼Àµ¶",         "ji dao",             "", "1" }),
    5500 : ({ "find", "½äµ¶",         "jie dao",            "", "1" }),
    7000 : ({ "find", "ÀÃÒøØ°Ê×",     "silver dagger",      "", "1" }),
    8000 : ({ "find", "Ìêµ¶",         "ti dao",             "", "1" }),

   10000 : ({ "find", "É±Íþ´ó°ô",     "shawei bang",        "", "1" }),
   15000 : ({ "find", "´ó°å¸«",       "bigaxe",             "", "1" }),

   11000 : ({ "find", "ïôÎ²½£",       "zhiwei jian",        "", "1" }),
   12000 : ({ "find", "¿ÝËÉÕÈ",       "kusong zhang",       "", "1" }),
   13000 : ({ "find", "ÜêÂÜÇ¹",       "biluo qiang",        "", "1" }),
   14000 : ({ "find", "»±´Ì²æ",       "huaici cha",         "", "1" }),
   15000 : ({ "find", "ÁøÒ¶µ¶",       "liuye dao",          "", "1" }),
   16000 : ({ "find", "Â¹Æ¤±Þ",       "lupi bian",          "", "1" }),

   21000 : ({ "find", "ÑãÔÆµ¶",       "yanyun blade",       "", "1" }),
   21500 : ({ "find", "ÌúÕÈ",         "tie zhang",          "", "1" }),
   22000 : ({ "find", "¸Ö²æ",         "gang cha",           "", "1" }),
   22500 : ({ "find", "Â¹½Ç²æ",       "cha",                "", "1" }),
   23000 : ({ "find", "Ñò½Ç²æ",       "cha",                "", "1" }),
   23500 : ({ "find", "Å£½Ç²æ",       "cha",                "", "1" }),
   24000 : ({ "find", "Ï¬½Ç²æ",       "cha",                "", "1" }),
   24500 : ({ "find", "µ¥ÈÐØ°",       "danren bi",          "", "1" }),
   25000 : ({ "find", "íàÊ¯´¸",       "qingshi chui",       "", "1" }),
   25500 : ({ "find", "Ó¥×ì¸«",       "yingzui fu",         "", "1" }),
   26000 : ({ "find", "°Ù½ÚÁ´",       "baijie lian",        "", "1" }),

   31000 : ({ "find", "°Å½¶±Þ",       "bajiao bian",        "", "1" }),
   31500 : ({ "find", "ÑîÊ÷×®",       "yangshu zhuang",     "", "1" }),
   32000 : ({ "find", "ÑîÊ÷¹Õ",       "yangshu guai",       "", "1" }),
   32500 : ({ "find", "ÑîÊ÷²æ",       "yangshu cha",        "", "1" }),
   33000 : ({ "find", "ÁøÌõ±Þ",       "liutiao bian",       "", "1" }),
   33500 : ({ "find", "Ê¯²ùµ¶",       "shichan dao",        "", "1" }),
   34000 : ({ "find", "Â¹½Ç²æ",       "lujiao cha",         "", "1" }),
   34500 : ({ "find", "´Ì»±ïµ",       "cihuai jian",        "", "1" }),
   35000 : ({ "find", "ºìÓ§Ç¹",       "hongying qiang",     "", "1" }),
   35500 : ({ "find", "»¨óÃ½£",       "huazhu jian",        "", "1" }),
   36000 : ({ "find", "°þÆ¤±Þ",       "bopi bian",          "", "1" }),
   36500 : ({ "find", "¿ªÉ½¸«",       "kaishan fu",         "", "1" }),
   37000 : ({ "find", "ÇàÊ¯´¸",       "qingsho chui",       "", "1" }),
   37500 : ({ "find", "ÖþÉ½°Ò",       "zhushan pa",         "", "1" }),
   38000 : ({ "find", "»ëÌúÕÈ",       "huntie zhang",       "", "1" }),
   38500 : ({ "find", "´ò¹·¹÷",       "daguo gun",          "", "1" }),
   39000 : ({ "find", "Å£½ÇÈÐ",       "niujiao ren",        "", "1" }),

   41000 : ({ "find", "½ð¹Ï",         "golden hammer",      "", "1" }),
   41500 : ({ "find", "³¤Íäµ¶",       "chang wan dao",      "", "1" }),
   42000 : ({ "find", "¶ÌÍäµ¶",       "duan wan dao",       "", "1" }),
   42500 : ({ "find", "ÔÂÑÀÍäµ¶",     "yueya wan dao",      "", "1" }),
   43000 : ({ "find", "Å£¹Ç°ô",       "niugu bang",         "", "1" }),
   43500 : ({ "find", "Å£Í·µ¶",       "niutou dao",         "", "1" }),
   44000 : ({ "find", "Å£½Ç²æ",       "niujiao cha",        "", "1" }),

   51000 : ({ "find", "½ðµ¶",         "jin dao",            "", "1" }),
   51500 : ({ "find", "Â«»¨²Ý",       "luhua cao",          "", "1" }),
   52000 : ({ "find", "Õ¶Í·µ¶",       "zhantou dao",        "", "1" }),
   52500 : ({ "find", "Ìú¾£¼¬",       "tie jingji",         "", "1" }),
   53000 : ({ "find", "ÌúÁ´",         "tie lian",           "", "1" }),
   53500 : ({ "find", "¶ÌÌú×¦",       "tie zhua",           "", "1" }),
   54000 : ({ "find", "³¤Ìú×¦",       "tie zhua",           "", "1" }),
   54500 : ({ "find", "ÌúÇò",         "tie qiu",            "", "1" }),
   55000 : ({ "find", "ÏóÑÀ½£",       "xiangya jian",       "", "1" }),
   55500 : ({ "find", "»¢Í·µ¶",       "hutou dao",          "", "1" }),
   56000 : ({ "find", "ÁúÐë²æ",       "longxu cha",         "", "1" }),
   56500 : ({ "find", "Öíâ²ÑÀ",       "zhu liaoya",         "", "1" }),
   57000 : ({ "find", "·ïÎ²±Þ",       "fengwei bian",       "", "1" }),
   57500 : ({ "find", "Ô§Ñì¹÷",       "yuanyang gun",       "", "1" }),
   58000 : ({ "find", "Ô§Ñì¹÷",       "yuanyang gun",       "", "1" }),

   62000 : ({ "find", "·÷³¾",         "fuchen",             "", "1" }),
   63000 : ({ "find", "Æß³Ý°Ò",       "qichi pa",           "", "1" }),
   64000 : ({ "find", "½äµ¶",         "jie dao",            "", "1" }),
   65000 : ({ "find", "ÇàÍ­²æ",       "qingtong cha",       "", "1" }),
   66000 : ({ "find", "·¨´¸",         "fa chui",            "", "1" }),
   67000 : ({ "find", "×ÏÔÆ½£",       "ziyun jian",         "", "1" }),
   68000 : ({ "find", "ÉÕ»ð¹÷",       "shaohuo gun",        "", "1" }),

   71000 : ({ "find", "Òø²æ",         "silver fork",        "", "1" }),
   72000 : ({ "find", "ÖþÐÇ°Ò",       "zhuxing pa",         "", "1" }),
   73000 : ({ "find", "Ë«Í·Ã¬",       "shuangtou mao",      "", "1" }),
   74000 : ({ "find", "¸ð½£",         "ge jian",            "", "1" }),
   75000 : ({ "find", "ÐÂÔÂµ¶",       "xinyue dao",         "", "1" }),

   81000 : ({ "find", "ÎÚ·ïïµ",       "wufeng jian",        "", "1" }),
   82000 : ({ "find", "ÖñÕÈ",         "zhu zhang",          "", "1" }),
   91000 : ({ "find", "Èý³Ý¸Ö²æ",     "sanchi gangcha",     "", "1" }),
   92000 : ({ "find", HIY"»ÆÍ­ìøÕÈ"NOR, "huangtong chanzhang", "", "1" }),
  100000 : ({ "find", "Ð¡½ð¹¿°ô",     "xiao jingu bang",    "", "1" }),
  110000 : ({ "find", "Ð¡¾Å³ÝîÙ",     "xiao jiuchi pa",     "", "1" }),
  120000 : ({ "find", "Ì«ÒÒÖñµ¶",     "taiyi zhu dao",      "", "1" }),
  130000 : ({ "find", "Ð¡½µÑýÕÈ",     "xiao xiangyao zhang","", "1" }),
  140000 : ({ "find", "ËÄÃ÷²ù",       "siming chan",        "", "1" }),
  150000 : ({ "find", "³þåú½£",       "chufei sword",       "", "1" }),
  160000 : ({ "find", "°Ë±¦Í­´¸",     "hammer",             "", "1" }),
  200000 : ({ "find", "ÔÂÑÀ²ù",       "moon fork",          "", "1" }),
  210000 : ({ "find", "Ðû»¨¸«",       "xuanhua fu",         "", "1" }),
  220000 : ({ "find", "¡ñ½ðµ¤É°¡ñ",   "jindan sha",         "", "1" }),
  300000 : ({ "find", "ó´Áú¹Õ",       "panlong guai",       "", "1" }),
  310000 : ({ "find", "µã¸ÖÇ¹",       "diangang qiang",     "", "1" }),

  400000 : ({ "find", "Ðå»¨Õë",       "xiuhua zhen",        "", "1" }),
  410000 : ({ "find", "°Ë°êÃ·»¨´¸",   "meihua hammer",      "", "1" }),
  420000 : ({ "find", "±ÌÓñË«Ç¹",     "jade spear",         "", "1" }),
  430000 : ({ "find", "Çà·æ½£",       "qingfeng sword",     "", "1" }),
  440000 : ({ "find", "ÎÞ³£°ô",       "wuchang bang",       "", "1" }),

  500000 : ({ "find", "ÐÓ»¨Ö¦",       "xinghua zhi",        "", "1" }),
  510000 : ({ "find", "¹ÅÌÙÕÈ",       "guteng zhang",       "", "1" }),

  600000 : ({ "find", "¾Å³Ý¶¤îÙ",     "ding pa",            "", "1" }),
  610000 : ({ "find", RED"À¦ÏÉË÷"NOR, "kunxian suo",        "", "1" }),

  700000 : ({ "find", "¶ÌÈíÀÇÑÀ°ô",   "langya bang",        "", "1" }),
  710000 : ({ "find", YEL"»¢Î²±Þ"NOR, "tiger mace",         "", "1" }),

  800000 : ({ "find", "ÌÄ»¨½£",       "tanghua jian",       "", "1" }),
  810000 : ({ "find", "Ê¨ÍÈ¹Ç",       "shitui gu",          "", "1" }),
  820000 : ({ "find", "ºü¹Ç´Ì",       "hugu ci",            "", "1" }),
  830000 : ({ "find", "Ã·»¨Â¹½Ç",     "meihualu jiao",      "", "1" }),
  840000 : ({ "find", "Å£Î²",         "niu wei",            "", "1" }),
  850000 : ({ "find", "¿³É½µ¶",       "kanshan dao",        "", "1" }),

  900000 : ({ "find", "½ð¸Õ×Á",       "jingang zhuo",       "", "1" }),
  910000 : ({ "find", "³àÁúÕ¶",       "dragon blade",       "", "1" }),
  920000 : ({ "find", "Áú½Ç²æ",       "dragon fork",        "", "1" }),
  930000 : ({ "find", "ÎÚÁúïµ",       "dragon mace",        "", "1" }),
  940000 : ({ "find", "Áú³ÝîÙ",       "dragon rake",        "", "1" }),
  950000 : ({ "find", "Áú¹ÇÇ¹",       "dragon spear",       "", "1" }),
  970000 : ({ "find", "ÅÌÁú¹÷",       "dragon stick",       "", "1" }),
  980000 : ({ "find", "ÁúÈª½£",       "dragon sword",       "", "1" }),
  990000 : ({ "find", "ÈíÁú½î",       "dragon whip",        "", "1" }), 
 1000000 : ({ "find", "îá¸«",         "yue fu",             "", "1" }),
 1100000 : ({ "find", "´óµ¶",         "da dao",             "", "1" }),
 1200000 : ({ "find", "´ó¹÷",         "da gun",             "", "1" }),
 1300000 : ({ "find", "»Ï½ðÉþ",       "huangjin sheng",     "", "1" }),
 1400000 : ({ "find", "¾É°×²¼´î°ü",   "da bao",             "", "1" }),
 1600000 : ({ "find", "×Ï½ðºìºùÂ«",   "hu lu",              "", "1" }),
 1700000 : ({ "find", "ÑòÖ¬Óñ¾»Æ¿",   "jing ping",          "", "1" }),
 2200000 : ({ "find", "ÆÐÌáÕÈ",       "puti zhang",         "", "1" }),
 2300000 : ({ "find", HIY"¾Å»·ÎýÕÈ"NOR, "nine-ring staff",  "", "1" }),
]);

void create()
{
  seteuid(getuid());
  m_keys=order_list(keys(quests_weapon));
}

mapping query_quest(object who)
{
  mapping quest;
  int i;
  string* info;
  string *strs = ({
    "$NÏëÏëËµµÀ£º½ñÌìÎÒÕý×¼±¸ÇëÈËÈ¥ÕÒ",
    "$NÏ¸ÏëÁËÒ»ÏÂËµµÀ£º±¾ÃÅÓÐÈËÏëÒªÊ²Ã´",
    "$NµãÍ·ËµµÀ£ºÕâÀïÉÐÈ±Ð©",
    "$NÏëÏëËµµÀ£º¿É·ñ°ï±¾ÃÅÑ°µÃ",
  });  
  
  i = quest_accurate_index (m_keys, who->query("combat_exp"));
  i = quest_random_index (m_keys, i);
  info=quests_weapon[m_keys[i]];
  
  quest=(["quest":"ÕÒ"+info[IDX_NAME]]);
  quest+=(["quest_msg":strs[random(sizeof(strs))]+info[IDX_NAME]+
           "£¬Äã¿É·ñÈ¥Ñ°Ò»Ð©À´£¿\n"]);
  quest+=(["bonus":log10(who->query("combat_exp"))*50+10]);
  quest+=(["reward_msg":"$NÐ¦µÀ£º²»´í²»´í£¬ÓÐÀÍÄãÁË¡£\n"]);
  return quest;
}
